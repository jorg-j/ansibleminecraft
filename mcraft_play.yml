---

- hosts: localhost

  vars:
    upgradecmd: wget -O /home/m/Downloads/mcraft_play.yml https://raw.githubusercontent.com/jorg-j/ansibleminecraft/main/mcraft_play.yml; ansible-playbook /home/m/Downloads/mcraft_play.yml
    install_mcraft: true
  tasks:
  
  - name: update/upgrade system
    become: true
    apt:
      upgrade: dist
      update_cache: yes

  - name: Ensure Alias in bashrc
    lineinfile:
      path: /home/m/.bashrc
      line: 'alias mcupgrade="{{ upgradecmd }}"'
      state: present

  - name: Downloading minecraft deb file
    get_url:
      url: https://launcher.mojang.com/download/Minecraft.deb
      dest: /home/m/Downloads/Minecraft.deb
    when: install_mcraft | bool
  
  - name: Install Minecraft .deb package
    become: true
    apt:
      deb: /home/m/Downloads/Minecraft.deb
    when: install_mcraft | bool

